---
import { getLangFromUrl, useTranslations, getLocalizedPath } from '../i18n/utils';
import { PHONE, PHONE_URL, WHATSAPP_URL } from '../lib/constants';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const servicesPath = lang === 'es' ? '/servicios' : '/services';
const areasPath = lang === 'es' ? '/zonas' : '/areas';

const serviceLinks = [
  { href: `${servicesPath}/${lang === 'es' ? 'fugas-agua' : 'water-leaks'}`, label: t('services.waterLeaks.title') },
  { href: `${servicesPath}/${lang === 'es' ? 'desatascos' : 'unclogging'}`, label: t('services.unclogging.title') },
  { href: `${servicesPath}/${lang === 'es' ? 'urgencias' : 'emergency'}`, label: t('services.emergency.title') },
];

const areaLinks = [
  { href: `${areasPath}/eixample`, label: 'Eixample' },
  { href: `${areasPath}/vila-de-gracia`, label: 'Gr√†cia' },
  { href: `${areasPath}/el-raval`, label: 'El Raval' },
];
---

<footer class="bg-gray-900 text-white py-10 md:py-12">
  <div class="max-w-6xl mx-auto px-4">
    <div class="grid grid-cols-2 md:grid-cols-4 gap-6 md:gap-8 mb-8">
      <!-- Brand -->
      <div class="col-span-2 md:col-span-1">
        <a href={getLocalizedPath('/', lang)} class="text-lg md:text-xl font-bold mb-3 md:mb-4 block">
          üîß {t('site.name')}
        </a>
        <p class="text-gray-400 text-sm">{t('footer.description')}</p>
      </div>
      
      <!-- Services -->
      <div>
        <h4 class="font-semibold mb-3 md:mb-4 text-sm md:text-base">{t('footer.services')}</h4>
        <ul class="text-gray-400 text-sm">
          {serviceLinks.map(link => (
            <li>
              <a href={getLocalizedPath(link.href, lang)} class="hover:text-white block py-2">
                {link.label}
              </a>
            </li>
          ))}
        </ul>
      </div>
      
      <!-- Areas -->
      <div>
        <h4 class="font-semibold mb-3 md:mb-4 text-sm md:text-base">{t('footer.areas')}</h4>
        <ul class="text-gray-400 text-sm">
          {areaLinks.map(link => (
            <li>
              <a href={getLocalizedPath(link.href, lang)} class="hover:text-white block py-2">
                {link.label}
              </a>
            </li>
          ))}
        </ul>
      </div>
      
      <!-- Contact -->
      <div>
        <h4 class="font-semibold mb-3 md:mb-4 text-sm md:text-base">{t('footer.contact')}</h4>
        <ul class="text-gray-400 text-sm">
          <li><a href={PHONE_URL} class="hover:text-white block py-2">üìû {PHONE.display}</a></li>
          <li><a href={WHATSAPP_URL} target="_blank" rel="noopener" class="hover:text-white block py-2">üí¨ WhatsApp</a></li>
          <li class="py-2">üìç Barcelona</li>
        </ul>
      </div>
    </div>
    
    <div class="border-t border-gray-800 pt-6 md:pt-8 text-center text-gray-400 text-xs md:text-sm">
      <p>¬© {new Date().getFullYear()} {t('site.name')} ‚Äî {t('footer.rights')}</p>
    </div>
  </div>
</footer>
